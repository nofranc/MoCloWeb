<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html lang="en">
	<head>
		<meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
		<title>MoClo Web</title>
		
		<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
		<link rel="stylesheet" href="//ajax.googleapis.com/ajax/libs/jqueryui/1.11.2/themes/smoothness/jquery-ui.css" />
		<script src="//ajax.googleapis.com/ajax/libs/jqueryui/1.11.2/jquery-ui.min.js"></script>

		<style>
			#level0{
				border: 1px solid black;
			}

			#datasheet{
				position:absolute;
				border: 1px solid black;
				top: 50px;
				left: 500px;
				padding:10px;
				width: 400px;
				height: 200px;
				background-color: #fff;
				overflow:scroll;
				overflow-x:hidden;
				word-wrap:break-word;
			}
		</style>


		<script>
			$(function(){

				//List all parts by category
				var types = ["promoters", "rbs", "cds", "terminators"];
				var listTypes = ["promTab", "rbsTab", "cdsTab", "terminTab"];

				$.each(types, function(index, value) { //parse each .json

					$.getJSON(value + ".json", function( data ) {
						var allParts = [];
						$.each(data, function(i, v){ //json array
							var part = "<li class='" + value + "'>";
							$.each(v, function(key, val) { //json dict
								part += "<span class='" + key + "'>" + val + "</span><br>";

							});
							part += "</li>";
							allParts.push(part);
						});
						
						$("#parts").append(allParts.join(""));
						
					});	

				});

				//Tab functionality
				$("#etabs > *").click(function(){
					var i = listTypes.indexOf(this.id);

					if(i > -1){
						$("#parts " + "." + types[i]).show();
						$("#parts li").not("." + types[i]).hide();
					} else {
						$("#parts li").show();
					}
				});

				//load info for datasheet (maybe can do with loading site & parsing xml instead)
				//--> http://parts.igem.org/cgi/xml/part.cgi?part=<part-id>
				$(document).on("click", "#parts > * > span", function(){
					if($(this).attr("class") == "Id"){
						var partID = $(this).html();
						
						$.get(partID + ".txt", function(data) {
							$("#datasheet").html(data);
						});
						
					}
				});



			});
		</script>
	</head>
	<body>
		<div id = "level0">
			<ul id="etabs">
				<li id="promTab">Promoters</li>
				<li id="rbsTab">RBS</li>
				<li id="cdsTab">CDS</li>
				<li id="terminTab">Terminators</li>
				<li id="allTab">Search All</li>
			</ul>
			<ul id="parts"></ul>
			<div id="datasheet"></div>
		</div>
		
	</body>
</html>